# =============================================================================
# Resync v5.3.16 - HCL Workload Automation AI Interface
# =============================================================================
# SINGLE SOURCE OF TRUTH for all Python dependencies
# Install: pip install -r requirements.txt
# 
# Security Updates (v5.3.15):
# - langfuse>=3.54.1 (CVE-2025-23207, hyperlink injection fix)
# - setuptools>=70.0.0 (CVE-2024-* security fixes)
#
# v5.3.16 Enhancements:
# - Enhanced Pydantic validation with Field constraints
# - Security validators (SQL injection, XSS prevention)
# - Semantic Cache for LLM responses (60-70% API cost reduction)
# - Local embedding model (sentence-transformers)
# =============================================================================

# -----------------------------------------------------------------------------
# Core Web Framework
# -----------------------------------------------------------------------------
fastapi>=0.109.0
uvicorn[standard]>=0.27.0
starlette>=0.35.0
python-multipart>=0.0.6

# -----------------------------------------------------------------------------
# Database - PostgreSQL Unified Stack (Relational + Graph + Vector)
# -----------------------------------------------------------------------------
sqlalchemy[asyncio]>=2.0.0
asyncpg>=0.29.0              # PostgreSQL async driver (REQUIRED)
alembic>=1.13.0              # Database migrations (async mode)
pgvector>=0.3.0              # Vector similarity search extension

# Note: Apache AGE extension for graph queries is installed via PostgreSQL
# See docs/POSTGRESQL_EXTENSIONS_SETUP.md for installation instructions

# -----------------------------------------------------------------------------
# Authentication & Security
# -----------------------------------------------------------------------------
python-jose[cryptography]>=3.3.0  # Note: transitive dep 'ecdsa' has known timing
                                   # vulnerabilities (CVE-2024-23342). Consider
                                   # PyJWT as alternative if ECDSA keys are used.
passlib[bcrypt]>=1.7.4
bcrypt>=4.0.0

# -----------------------------------------------------------------------------
# Build & Package Security
# -----------------------------------------------------------------------------
setuptools>=70.0.0           # CVE-2024-* security fixes

# -----------------------------------------------------------------------------
# HTTP Clients
# -----------------------------------------------------------------------------
httpx>=0.26.0
aiohttp>=3.9.0

# -----------------------------------------------------------------------------
# Validation & Data Models
# -----------------------------------------------------------------------------
pydantic>=2.5.0
pydantic-settings>=2.1.0
email-validator>=2.1.0

# -----------------------------------------------------------------------------
# Configuration
# -----------------------------------------------------------------------------
python-dotenv>=1.0.0
pyyaml>=6.0.0
toml>=0.10.0

# -----------------------------------------------------------------------------
# File Operations
# -----------------------------------------------------------------------------
watchdog>=3.0.0              # File watching for hot-reload
aiofiles>=23.2.0             # Async file I/O

# -----------------------------------------------------------------------------
# System Monitoring
# -----------------------------------------------------------------------------
psutil>=5.9.0

# -----------------------------------------------------------------------------
# LLM Integration
# -----------------------------------------------------------------------------
litellm>=1.0.0               # Multi-provider LLM gateway
openai>=1.0.0                # OpenAI API client
anthropic>=0.18.0            # Anthropic API client
tiktoken>=0.7.0              # Token counting for LLM context

# -----------------------------------------------------------------------------
# AI Agent Framework
# -----------------------------------------------------------------------------
agno>=1.1.0                  # Multi-agent orchestration (Agno Teams)
langgraph>=0.2.0             # Agent state graphs and workflows

# -----------------------------------------------------------------------------
# AI Observability & Prompt Management
# -----------------------------------------------------------------------------
langfuse>=3.54.1              # Prompt versioning, A/B testing, tracing (CVE fixes)

# -----------------------------------------------------------------------------
# AI Monitoring & Drift Detection
# -----------------------------------------------------------------------------
evidently>=0.4.0             # Model monitoring and data drift detection
pandas>=2.0.0                # DataFrame operations (required by Evidently)

# -----------------------------------------------------------------------------
# Resilience & Performance Patterns
# -----------------------------------------------------------------------------
tenacity>=8.2.0              # Retry with exponential backoff
pybreaker>=1.1.0             # Circuit breaker pattern

# -----------------------------------------------------------------------------
# Metrics & Observability
# -----------------------------------------------------------------------------
# Note: Project uses custom Prometheus-compatible metrics in core/metrics_compat.py
# No external prometheus-client dependency needed

# -----------------------------------------------------------------------------
# Document Processing (RAG)
# -----------------------------------------------------------------------------
beautifulsoup4>=4.12.0       # HTML parsing for IBM/HCL documentation
lxml>=5.0.0                  # Fast HTML/XML parser backend
pypdf>=3.17.0                # PDF text extraction

# -----------------------------------------------------------------------------
# Caching
# -----------------------------------------------------------------------------
redis[hiredis]>=5.0.0        # Redis with C extension for performance
aiocache>=0.12.0             # Async caching abstraction

# Semantic Cache (v5.3.16) - LLM response caching with vector similarity
# Note: sentence-transformers is optional but recommended for best performance
# Without it, the system uses hash-based fallback (exact match only)
sentence-transformers>=2.2.0  # Local embedding model for semantic similarity
numpy>=1.24.0                 # Required for embedding operations
# Optional: redisvl>=0.1.0    # Redis Vector Library (if using Redis Stack)

# -----------------------------------------------------------------------------
# Logging
# -----------------------------------------------------------------------------
structlog>=24.1.0            # Structured logging

# -----------------------------------------------------------------------------
# Testing
# -----------------------------------------------------------------------------
pytest>=8.0.0
pytest-asyncio>=0.23.0
pytest-cov>=4.1.0

# -----------------------------------------------------------------------------
# Development Tools (optional)
# -----------------------------------------------------------------------------
# black>=24.0                # Code formatter
# isort>=5.13                # Import sorter
# ruff>=0.3.0                # Fast linter
# pylint>=3.0                # Static analysis

# -----------------------------------------------------------------------------
# OpenTelemetry (optional - for distributed tracing)
# -----------------------------------------------------------------------------
# opentelemetry-api>=1.22.0
# opentelemetry-sdk>=1.22.0
# opentelemetry-instrumentation-fastapi>=0.43b0
# opentelemetry-instrumentation-httpx>=0.43b0
